backend:
  name: git-gateway
  branch: main # Change to 'master' if your repo uses master

# UPDATED PATHS: "uploads" folder is at the root, not inside frontend
media_folder: "uploads" 
public_folder: "uploads"

collections:
  # ---------------------------------------------------
  # 1. PRODUCT INVENTORY
  # ---------------------------------------------------
  - name: "inventory"
    label: "Inventory"
    editor:
      preview: false
    files:
      - name: "products"
        label: "Edit Products"
        # UPDATED PATH: removed 'frontend/'
        file: "products.json" 
        description: "Manage your shoe inventory here."
        fields:
          - name: "shoes"
            label: "Product List"
            widget: "list"
            summary: "{{fields.title}} - {{fields.price}}"
            fields:
              - { label: "Product Title", name: "title", widget: "string" }
              - { label: "Price (PKR)", name: "price", widget: "number" }
              - { label: "Category", name: "category", widget: "select", options: ["Men", "Women", "Unisex", "Sale"], default: "Men" }
              - { label: "Rating (0-5)", name: "rating", widget: "number", value_type: "float", min: 0, max: 5, step: 0.1, default: 0, hint: "Higher rated items appear first on home page." }
              - { label: "Main Image", name: "image", widget: "image" }
              - { label: "Description", name: "description", widget: "text", required: false }
              - name: "gallery"
                label: "Extra Images"
                widget: "list"
                required: false
                fields:
                  - { label: "Image", name: "image", widget: "image" }

  # ---------------------------------------------------
  # 2. ORDERS MANAGEMENT
  # ---------------------------------------------------
  - name: "orders"
    label: "Orders"
    # UPDATED PATH: removed 'frontend/'
    folder: "orders" 
    create: true
    slug: "order-{{slug}}"
    extension: "json"
    format: "json"
    
    view_filters:
      - label: "Pending Orders"
        field: "status"
        pattern: "Pending"
      - label: "Delivered Orders"
        field: "status"
        pattern: "Delivered"
      - label: "Cancelled"
        field: "status"
        pattern: "Cancelled"

    fields:
      - { label: "Order ID", name: "title", widget: "string" }
      - { label: "Customer Name", name: "customer_name", widget: "string" }
      - { label: "Phone Number", name: "phone", widget: "string" }
      - { label: "Order Status", name: "status", widget: "select", options: ["Pending", "Shipped", "Delivered", "Cancelled"], default: "Pending" }
      - { label: "Total Amount (PKR)", name: "total", widget: "number" }
      - { label: "Order Date", name: "date", widget: "datetime" }
      - name: "items"
        label: "Purchased Items"
        widget: "list"
        fields:
          - { label: "Shoe Name", name: "item_name", widget: "string" }
          - { label: "Price", name: "item_price", widget: "number" }

  # ---------------------------------------------------
  # 3. GLOBAL SETTINGS
  # ---------------------------------------------------
  - name: "settings"
    label: "Settings"
    files:
      - name: "general"
        label: "Site Settings"
        # UPDATED PATH: removed 'frontend/'
        file: "settings.json"
        fields:
          - { label: "Store Name", name: "store_name", widget: "string" }
          - { label: "Display Address", name: "address", widget: "string" }
          - { label: "Phone Number", name: "display_phone", widget: "string" }
          - { label: "Instagram Link", name: "instagram", widget: "string", required: false }
          - { label: "Facebook Link", name: "facebook", widget: "string", required: false }